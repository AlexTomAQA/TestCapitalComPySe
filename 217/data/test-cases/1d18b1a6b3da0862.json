{"uid":"1d18b1a6b3da0862","name":"TC_01.04.01_005 | Testing button [Buy] on trading instrument page. Bid:01.04.01_005-zh.au.Auth","fullName":"tests.US_01_Markets.US_01-04_Indices.US_01-04-01_Indices_test.TestIndicesItemPage#test_005_page_trading_instrument_buy_button","historyId":"a48e7a7f485effee714237e18ab7488e","time":{"start":1713970627696,"stop":1713970640594,"duration":12898},"description":"\n        Check: Button [Buy] on trading instrument page\n        Language: All. License: All,except FCA.\n        ","descriptionHtml":"<pre><code>    Check: Button [Buy] on trading instrument page\n    Language: All. License: All,except FCA.\n</code></pre>\n","status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">","statusTrace":"self = <US_01-04-01_Indices_test.TestIndicesItemPage object at 0x7fc87d71bd70>\nworker_id = 'master'\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>\ncur_language = 'zh', cur_country = 'au', cur_role = 'Auth'\ncur_login = 'test001.miketar+1@gmail.com', cur_password = 'Qwer1234-!@#$'\ncur_item_link = 'https://capital.com/zh/gbp-usd-feilv'\n\n    @allure.step(\"Start test of button [Buy] on trading instrument page'\")\n    @pytest.mark.test_005\n    def test_005_page_trading_instrument_buy_button(\n            self, worker_id, d, cur_language, cur_country, cur_role, cur_login, cur_password, cur_item_link):\n        \"\"\"\n        Check: Button [Buy] on trading instrument page\n        Language: All. License: All,except FCA.\n        \"\"\"\n        bid = build_dynamic_arg_v4(\n            d, worker_id, cur_language, cur_country, cur_role,\n            \"01.04\", \"Markets > Menu item [Indices]\",\n            \".01_005\", \"Testing button [Buy] on trading instrument page\")\n    \n        Common().check_country_in_list_and_skip_if_present(cur_country, [\"gb\"])\n    \n        page_conditions = Conditions(d, \"\")\n        page_conditions.preconditions(\n            d, CapitalComPageSrc.URL, \"\", cur_language, cur_country, cur_role, cur_login, cur_password)\n    \n        test_element = TradeCFDBuyButton(d, cur_item_link, bid)\n>       test_element.full_test(d, cur_language, cur_country, cur_role, cur_item_link)\n\ntests/US_01_Markets/US_01-04_Indices/US_01-04-01_Indices_test.py:151: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/Elements/TradeCFDBuyButton.py:30: in full_test\n    test_element.assert_trading_platform_v4(d, cur_item_link, False, True, trade_instrument)\npages/Elements/AssertClass.py:167: in assert_trading_platform_v4\n    self.page_trading.should_be_trading_platform_page_v4(d, cur_link, tpd, tpi, trade_instrument)\npages/Capital/Trading_platform/trading_platform.py:131: in should_be_trading_platform_page_v4\n    self.should_be_corresponding_trading_instrument(test_link, trade_instrument)\npages/Capital/Trading_platform/trading_platform.py:422: in should_be_corresponding_trading_instrument\n    retest_table_fill(self.driver, self.bid, '16', self.link)\ntests/ReTestsAuto/ReTest_table_fill.py:148: in retest_table_fill\n    bug_present = check_gs_table(bid, bug_n, manual)\ntests/ReTestsAuto/ReTest_table_fill.py:40: in check_gs_table\n    gs.update_range_values(f'U{5 + index}', time_update)\ntests/ReTestsAuto/GoogleSheets/googlesheets.py:134: in update_range_values\n    body=body).execute()\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py:130: in positional_wrapper\n    return wrapped(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <googleapiclient.http.HttpRequest object at 0x7fc87c865970>\nhttp = <google_auth_httplib2.AuthorizedHttp object at 0x7fc87c6e1010>\nnum_retries = 0\n\n    @util.positional(1)\n    def execute(self, http=None, num_retries=0):\n        \"\"\"Execute the request.\n    \n        Args:\n          http: httplib2.Http, an http object to be used in place of the\n                one the HttpRequest request object was constructed with.\n          num_retries: Integer, number of times to retry with randomized\n                exponential backoff. If all retries fail, the raised HttpError\n                represents the last request. If zero (default), we attempt the\n                request only once.\n    \n        Returns:\n          A deserialized object model of the response body as determined\n          by the postproc.\n    \n        Raises:\n          googleapiclient.errors.HttpError if the response was not a 2xx.\n          httplib2.HttpLib2Error if a transport error has occurred.\n        \"\"\"\n        if http is None:\n            http = self.http\n    \n        if self.resumable:\n            body = None\n            while body is None:\n                _, body = self.next_chunk(http=http, num_retries=num_retries)\n            return body\n    \n        # Non-resumable case.\n    \n        if \"content-length\" not in self.headers:\n            self.headers[\"content-length\"] = str(self.body_size)\n        # If the request URI is too long then turn it into a POST request.\n        # Assume that a GET request never contains a request body.\n        if len(self.uri) > MAX_URI_LENGTH and self.method == \"GET\":\n            self.method = \"POST\"\n            self.headers[\"x-http-method-override\"] = \"GET\"\n            self.headers[\"content-type\"] = \"application/x-www-form-urlencoded\"\n            parsed = urllib.parse.urlparse(self.uri)\n            self.uri = urllib.parse.urlunparse(\n                (parsed.scheme, parsed.netloc, parsed.path, parsed.params, None, None)\n            )\n            self.body = parsed.query\n            self.headers[\"content-length\"] = str(len(self.body))\n    \n        # Handle retries for server-side errors.\n        resp, content = _retry_request(\n            http,\n            num_retries,\n            \"request\",\n            self._sleep,\n            self._rand,\n            str(self.uri),\n            method=str(self.method),\n            body=self.body,\n            headers=self.headers,\n        )\n    \n        for callback in self.response_callbacks:\n            callback(resp)\n        if resp.status >= 300:\n>           raise HttpError(resp, content, uri=self.uri)\nE           googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py:938: HttpError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"d","time":{"start":1713970565223,"stop":1713970565667,"duration":444},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_login","time":{"start":1713970565667,"stop":1713970565667,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_password","time":{"start":1713970565667,"stop":1713970565668,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_role","time":{"start":1713970565667,"stop":1713970565667,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_language","time":{"start":1713970565667,"stop":1713970565667,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_country","time":{"start":1713970565667,"stop":1713970565667,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"worker_id","time":{"start":1713970565667,"stop":1713970565667,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n        Check: Button [Buy] on trading instrument page\n        Language: All. License: All,except FCA.\n        ","status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">","statusTrace":"self = <US_01-04-01_Indices_test.TestIndicesItemPage object at 0x7fc87d71bd70>\nworker_id = 'master'\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>\ncur_language = 'zh', cur_country = 'au', cur_role = 'Auth'\ncur_login = 'test001.miketar+1@gmail.com', cur_password = 'Qwer1234-!@#$'\ncur_item_link = 'https://capital.com/zh/gbp-usd-feilv'\n\n    @allure.step(\"Start test of button [Buy] on trading instrument page'\")\n    @pytest.mark.test_005\n    def test_005_page_trading_instrument_buy_button(\n            self, worker_id, d, cur_language, cur_country, cur_role, cur_login, cur_password, cur_item_link):\n        \"\"\"\n        Check: Button [Buy] on trading instrument page\n        Language: All. License: All,except FCA.\n        \"\"\"\n        bid = build_dynamic_arg_v4(\n            d, worker_id, cur_language, cur_country, cur_role,\n            \"01.04\", \"Markets > Menu item [Indices]\",\n            \".01_005\", \"Testing button [Buy] on trading instrument page\")\n    \n        Common().check_country_in_list_and_skip_if_present(cur_country, [\"gb\"])\n    \n        page_conditions = Conditions(d, \"\")\n        page_conditions.preconditions(\n            d, CapitalComPageSrc.URL, \"\", cur_language, cur_country, cur_role, cur_login, cur_password)\n    \n        test_element = TradeCFDBuyButton(d, cur_item_link, bid)\n>       test_element.full_test(d, cur_language, cur_country, cur_role, cur_item_link)\n\ntests/US_01_Markets/US_01-04_Indices/US_01-04-01_Indices_test.py:151: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/Elements/TradeCFDBuyButton.py:30: in full_test\n    test_element.assert_trading_platform_v4(d, cur_item_link, False, True, trade_instrument)\npages/Elements/AssertClass.py:167: in assert_trading_platform_v4\n    self.page_trading.should_be_trading_platform_page_v4(d, cur_link, tpd, tpi, trade_instrument)\npages/Capital/Trading_platform/trading_platform.py:131: in should_be_trading_platform_page_v4\n    self.should_be_corresponding_trading_instrument(test_link, trade_instrument)\npages/Capital/Trading_platform/trading_platform.py:422: in should_be_corresponding_trading_instrument\n    retest_table_fill(self.driver, self.bid, '16', self.link)\ntests/ReTestsAuto/ReTest_table_fill.py:148: in retest_table_fill\n    bug_present = check_gs_table(bid, bug_n, manual)\ntests/ReTestsAuto/ReTest_table_fill.py:40: in check_gs_table\n    gs.update_range_values(f'U{5 + index}', time_update)\ntests/ReTestsAuto/GoogleSheets/googlesheets.py:134: in update_range_values\n    body=body).execute()\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py:130: in positional_wrapper\n    return wrapped(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <googleapiclient.http.HttpRequest object at 0x7fc87c865970>\nhttp = <google_auth_httplib2.AuthorizedHttp object at 0x7fc87c6e1010>\nnum_retries = 0\n\n    @util.positional(1)\n    def execute(self, http=None, num_retries=0):\n        \"\"\"Execute the request.\n    \n        Args:\n          http: httplib2.Http, an http object to be used in place of the\n                one the HttpRequest request object was constructed with.\n          num_retries: Integer, number of times to retry with randomized\n                exponential backoff. If all retries fail, the raised HttpError\n                represents the last request. If zero (default), we attempt the\n                request only once.\n    \n        Returns:\n          A deserialized object model of the response body as determined\n          by the postproc.\n    \n        Raises:\n          googleapiclient.errors.HttpError if the response was not a 2xx.\n          httplib2.HttpLib2Error if a transport error has occurred.\n        \"\"\"\n        if http is None:\n            http = self.http\n    \n        if self.resumable:\n            body = None\n            while body is None:\n                _, body = self.next_chunk(http=http, num_retries=num_retries)\n            return body\n    \n        # Non-resumable case.\n    \n        if \"content-length\" not in self.headers:\n            self.headers[\"content-length\"] = str(self.body_size)\n        # If the request URI is too long then turn it into a POST request.\n        # Assume that a GET request never contains a request body.\n        if len(self.uri) > MAX_URI_LENGTH and self.method == \"GET\":\n            self.method = \"POST\"\n            self.headers[\"x-http-method-override\"] = \"GET\"\n            self.headers[\"content-type\"] = \"application/x-www-form-urlencoded\"\n            parsed = urllib.parse.urlparse(self.uri)\n            self.uri = urllib.parse.urlunparse(\n                (parsed.scheme, parsed.netloc, parsed.path, parsed.params, None, None)\n            )\n            self.body = parsed.query\n            self.headers[\"content-length\"] = str(len(self.body))\n    \n        # Handle retries for server-side errors.\n        resp, content = _retry_request(\n            http,\n            num_retries,\n            \"request\",\n            self._sleep,\n            self._rand,\n            str(self.uri),\n            method=str(self.method),\n            body=self.body,\n            headers=self.headers,\n        )\n    \n        for callback in self.response_callbacks:\n            callback(resp)\n        if resp.status >= 300:\n>           raise HttpError(resp, content, uri=self.uri)\nE           googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py:938: HttpError","steps":[{"name":"Start test of button [Buy] on trading instrument page'","time":{"start":1713970627696,"stop":1713970640593,"duration":12897},"status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/US_01_Markets/US_01-04_Indices/US_01-04-01_Indices_test.py\", line 151, in test_005_page_trading_instrument_buy_button\n    test_element.full_test(d, cur_language, cur_country, cur_role, cur_item_link)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Elements/TradeCFDBuyButton.py\", line 30, in full_test\n    test_element.assert_trading_platform_v4(d, cur_item_link, False, True, trade_instrument)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Elements/AssertClass.py\", line 167, in assert_trading_platform_v4\n    self.page_trading.should_be_trading_platform_page_v4(d, cur_link, tpd, tpi, trade_instrument)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 131, in should_be_trading_platform_page_v4\n    self.should_be_corresponding_trading_instrument(test_link, trade_instrument)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 422, in should_be_corresponding_trading_instrument\n    retest_table_fill(self.driver, self.bid, '16', self.link)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 148, in retest_table_fill\n    bug_present = check_gs_table(bid, bug_n, manual)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 40, in check_gs_table\n    gs.update_range_values(f'U{5 + index}', time_update)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/GoogleSheets/googlesheets.py\", line 134, in update_range_values\n    body=body).execute()\n               ^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py\", line 130, in positional_wrapper\n    return wrapped(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py\", line 938, in execute\n    raise HttpError(resp, content, uri=self.uri)\n","steps":[{"name":"Preconditions","time":{"start":1713970627721,"stop":1713970630709,"duration":2988},"status":"passed","steps":[{"name":"2024-04-24 14:56:05.183675   Start Checking Captcha","time":{"start":1713970629702,"stop":1713970630706,"duration":1004},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>"},{"name":"host","value":"'https://capital.com/'"},{"name":"end_point","value":"''"},{"name":"cur_language","value":"'zh'"},{"name":"cur_country","value":"'au'"},{"name":"cur_role","value":"'Auth'"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"2024-04-24 14:56:05.033758   Check that form [Sign up] opened","time":{"start":1713970633753,"stop":1713970635296,"duration":1543},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"timeout","value":"1"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click button [Add to favourite]","time":{"start":1713970635296,"stop":1713970635619,"duration":323},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"cur_role","value":"'Auth'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Checking that \"Trading platform\" page opened - ver 4","time":{"start":1713970635619,"stop":1713970640592,"duration":4973},"status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Elements/AssertClass.py\", line 167, in assert_trading_platform_v4\n    self.page_trading.should_be_trading_platform_page_v4(d, cur_link, tpd, tpi, trade_instrument)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 131, in should_be_trading_platform_page_v4\n    self.should_be_corresponding_trading_instrument(test_link, trade_instrument)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 422, in should_be_corresponding_trading_instrument\n    retest_table_fill(self.driver, self.bid, '16', self.link)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 148, in retest_table_fill\n    bug_present = check_gs_table(bid, bug_n, manual)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 40, in check_gs_table\n    gs.update_range_values(f'U{5 + index}', time_update)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/GoogleSheets/googlesheets.py\", line 134, in update_range_values\n    body=body).execute()\n               ^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py\", line 130, in positional_wrapper\n    return wrapped(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py\", line 938, in execute\n    raise HttpError(resp, content, uri=self.uri)\n","steps":[{"name":"Checking that the trading platform page has opened - ver 4","time":{"start":1713970635620,"stop":1713970640592,"duration":4972},"status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 131, in should_be_trading_platform_page_v4\n    self.should_be_corresponding_trading_instrument(test_link, trade_instrument)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/Capital/Trading_platform/trading_platform.py\", line 422, in should_be_corresponding_trading_instrument\n    retest_table_fill(self.driver, self.bid, '16', self.link)\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 148, in retest_table_fill\n    bug_present = check_gs_table(bid, bug_n, manual)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/ReTest_table_fill.py\", line 40, in check_gs_table\n    gs.update_range_values(f'U{5 + index}', time_update)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/GoogleSheets/googlesheets.py\", line 134, in update_range_values\n    body=body).execute()\n               ^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py\", line 130, in positional_wrapper\n    return wrapped(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py\", line 938, in execute\n    raise HttpError(resp, content, uri=self.uri)\n","steps":[{"name":"2024-04-24 14:56:05.033377   Check that the page has the expected title - ver 2","time":{"start":1713970635626,"stop":1713970635629,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"title","value":"'Trading Platform | Capital.com'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixing one row check results into Google Sheet Bugs Report","time":{"start":1713970638885,"stop":1713970639089,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"cell","value":"'B1'"},{"name":"values","value":"[['Busy']]"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixing one row check results into Google Sheet Bugs Report","time":{"start":1713970640333,"stop":1713970640519,"duration":186},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"cell","value":"'P1597'"},{"name":"values","value":"[[\"'16\"]]"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fixing one row check results into Google Sheet Bugs Report","time":{"start":1713970640519,"stop":1713970640591,"duration":72},"status":"broken","statusMessage":"googleapiclient.errors.HttpError: <HttpError 400 when requesting https://sheets.googleapis.com/v4/spreadsheets/1jG0hdjrUdjMFBYHXyBKRGbBwV0ICxfBPaBkgB98Nuuk/values:batchUpdate?alt=json returned \"Invalid value at 'data[0].values[0]' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'data[0].values[0]', 'description': 'Invalid value at \\'data[0].values[0]\\' (type.googleapis.com/google.protobuf.ListValue), \"24.04.2024 14:57:20\"'}]}]\">\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/ReTestsAuto/GoogleSheets/googlesheets.py\", line 134, in update_range_values\n    body=body).execute()\n               ^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/_helpers.py\", line 130, in positional_wrapper\n    return wrapped(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/googleapiclient/http.py\", line 938, in execute\n    raise HttpError(resp, content, uri=self.uri)\n","steps":[],"attachments":[],"parameters":[{"name":"cell","value":"'U1597'"},{"name":"values","value":"['24.04.2024 14:57:20']"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>"},{"name":"test_link","value":"'https://capital.com/zh/gbp-usd-feilv'"},{"name":"tpd","value":"False"},{"name":"tpi","value":"True"},{"name":"trade_instrument","value":"'British Pound / US Dollar'"}],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>"},{"name":"cur_link","value":"'https://capital.com/zh/gbp-usd-feilv'"},{"name":"tpd","value":"False"},{"name":"tpi","value":"True"},{"name":"trade_instrument","value":"'British Pound / US Dollar'"}],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"worker_id","value":"'master'"},{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"b66d04807edea724b23f2cce3fd7ac2b\")>"},{"name":"cur_language","value":"'zh'"},{"name":"cur_country","value":"'au'"},{"name":"cur_role","value":"'Auth'"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"},{"name":"cur_item_link","value":"'https://capital.com/zh/gbp-usd-feilv'"}],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"77f143735c860620","name":"Screenshot","source":"77f143735c860620.png","type":"image/png","size":74354},{"uid":"264669a25a1cb1e3","name":"log","source":"264669a25a1cb1e3.txt","type":"text/plain","size":1390},{"uid":"5a30ab69ea7b3dc","name":"stdout","source":"5a30ab69ea7b3dc.txt","type":"text/plain","size":5534}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":11,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"d::0","time":{"start":1713970905310,"stop":1713970905442,"duration":132},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"US_01.04 | Markets > Menu item [Indices]"},{"name":"feature","value":"Language: zh"},{"name":"story","value":"Country: au / Role: Auth"},{"name":"tag","value":"test_005"},{"name":"tag","value":"us_01_04_01"},{"name":"parentSuite","value":"tests.US_01_Markets.US_01-04_Indices"},{"name":"suite","value":"US_01-04-01_Indices_test"},{"name":"subSuite","value":"TestIndicesItemPage"},{"name":"host","value":"fv-az1498-820"},{"name":"thread","value":"21077-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.US_01_Markets.US_01-04_Indices.US_01-04-01_Indices_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"cur_country","value":"'au'"},{"name":"cur_item_link","value":"'https://capital.com/zh/gbp-usd-feilv'"},{"name":"cur_language","value":"'zh'"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"},{"name":"cur_role","value":"'Auth'"},{"name":"d","value":"'Chrome'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["test_005","us_01_04_01"]},"source":"1d18b1a6b3da0862.json","parameterValues":["'au'","'https://capital.com/zh/gbp-usd-feilv'","'zh'","'test001.miketar+1@gmail.com'","'Qwer1234-!@#$'","'Auth'","'Chrome'"]}