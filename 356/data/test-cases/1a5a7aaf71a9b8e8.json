{"uid":"1a5a7aaf71a9b8e8","name":"TC_55!364 (Lang: en) | Bid:55!364-en.gb.NoAuth","fullName":"tests.US_55_ReTestsManual.saii-d3v.US_55-saii-d3v_ReTestsManual_test.TestManualDetectedBugs#test_364","historyId":"1281cf733e6c985ecfa7c8ab0f729851","time":{"start":1742688094123,"stop":1742688099998,"duration":5875},"description":"\n         Check: Error 404 page is opened after click on any Trading instrument link\n         in the widget on the \"Spread betting\" page\n         Language: EN.\n         License: FCA, FCA.\n         Author: Sergey Aiidzhanov\n         ","descriptionHtml":"<pre><code>     Check: Error 404 page is opened after click on any Trading instrument link\n     in the widget on the &quot;Spread betting&quot; page\n     Language: EN.\n     License: FCA, FCA.\n     Author: Sergey Aiidzhanov\n</code></pre>\n","status":"failed","statusMessage":"Failed: Bug! 'Login' button is not clicked","statusTrace":"self = <pages.conditions_v2.NewConditions object at 0x7f7fd1048410>\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\nlink = 'https://capital.com/en-gb', login = 'test001.miketar+1@gmail.com'\npassword = 'Qwer1234-!@#$', cur_role = 'NoAuth'\n\n    @allure.step(f\"{datetime.now()}   Start Authorization\")\n    # @profile(precision=3)\n    def to_do_authorisation_new(self, d, link, login, password, cur_role):\n        \"\"\"Authorization\"\"\"\n        print(f\"\\n\" f\"{datetime.now()}   Start Authorization\")\n    \n        # Setup wait for later\n        menu = MainMenu(d, link)\n        assert login != \"\", \"Авторизация невозможна. Не указан e-mail\"\n        assert password != \"\", \"Авторизация невозможна. Не указан пароль\"\n    \n        # нажать в хедере на кнопку \"Log in\"\n        try:\n>           menu.element_is_clickable(menu.MENU_LOGIN).click()\n\npages/conditions_v2.py:237: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webelement.py:94: in click\n    self._execute(Command.CLICK_ELEMENT)\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webelement.py:395: in _execute\n    return self._parent.execute(command, params)\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webdriver.py:380: in execute\n    self.error_handler.check_response(response)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7f7fd120cd10>\nresponse = {'status': 400, 'value': '{\"value\":{\"error\":\"element click intercepted\",\"message\":\"element click intercepted: Element ...\\\\n#21 0x55bdf957ee76 \\\\u003Cunknown>\\\\n#22 0x7fde71e9caa4 \\\\u003Cunknown>\\\\n#23 0x7fde71f29c3c \\\\u003Cunknown>\\\\n\"}}'}\n\n    def check_response(self, response: Dict[str, Any]) -> None:\n        \"\"\"Checks that a JSON response from the WebDriver does not have an\n        error.\n    \n        :Args:\n         - response - The JSON response from the WebDriver server as a dictionary\n           object.\n    \n        :Raises: If the response contains an error message.\n        \"\"\"\n        status = response.get(\"status\", None)\n        if not status or status == ErrorCode.SUCCESS:\n            return\n        value = None\n        message = response.get(\"message\", \"\")\n        screen: str = response.get(\"screen\", \"\")\n        stacktrace = None\n        if isinstance(status, int):\n            value_json = response.get(\"value\", None)\n            if value_json and isinstance(value_json, str):\n                import json\n    \n                try:\n                    value = json.loads(value_json)\n                    if len(value) == 1:\n                        value = value[\"value\"]\n                    status = value.get(\"error\", None)\n                    if not status:\n                        status = value.get(\"status\", ErrorCode.UNKNOWN_ERROR)\n                        message = value.get(\"value\") or value.get(\"message\")\n                        if not isinstance(message, str):\n                            value = message\n                            message = message.get(\"message\")\n                    else:\n                        message = value.get(\"message\", None)\n                except ValueError:\n                    pass\n    \n        exception_class: Type[WebDriverException]\n        e = ErrorCode()\n        error_codes = [item for item in dir(e) if not item.startswith(\"__\")]\n        for error_code in error_codes:\n            error_info = getattr(ErrorCode, error_code)\n            if isinstance(error_info, list) and status in error_info:\n                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)\n                break\n        else:\n            exception_class = WebDriverException\n    \n        if not value:\n            value = response[\"value\"]\n        if isinstance(value, str):\n            raise exception_class(value)\n        if message == \"\" and \"message\" in value:\n            message = value[\"message\"]\n    \n        screen = None  # type: ignore[assignment]\n        if \"screen\" in value:\n            screen = value[\"screen\"]\n    \n        stacktrace = None\n        st_value = value.get(\"stackTrace\") or value.get(\"stacktrace\")\n        if st_value:\n            if isinstance(st_value, str):\n                stacktrace = st_value.split(\"\\n\")\n            else:\n                stacktrace = []\n                try:\n                    for frame in st_value:\n                        line = frame.get(\"lineNumber\", \"\")\n                        file = frame.get(\"fileName\", \"<anonymous>\")\n                        if line:\n                            file = f\"{file}:{line}\"\n                        meth = frame.get(\"methodName\", \"<anonymous>\")\n                        if \"className\" in frame:\n                            meth = f\"{frame['className']}.{meth}\"\n                        msg = \"    at %s (%s)\"\n                        msg = msg % (meth, file)\n                        stacktrace.append(msg)\n                except TypeError:\n                    pass\n        if exception_class == UnexpectedAlertPresentException:\n            alert_text = None\n            if \"data\" in value:\n                alert_text = value[\"data\"].get(\"text\")\n            elif \"alert\" in value:\n                alert_text = value[\"alert\"].get(\"text\")\n            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here\n>       raise exception_class(message, screen, stacktrace)\nE       selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element <button class=\"accountBtns_btn__vOcCs accountBtns_btnEmpty__TCWRE helpers_showLg__UPEqH js-analyticsClick js-analyticsVisible\" data-type=\"btn_header_login\" data-testid=\"login_btn\">...</button> is not clickable at point (1385, 121). Other element would receive the click: <div class=\"modal_overlay__f_YlZ modal_mobileBottomAttached__cTOIu\">...</div>\nE         (Session info: chrome=134.0.6998.88)\nE       Stacktrace:\nE       #0 0x55bdf957fffa <unknown>\nE       #1 0x55bdf903e970 <unknown>\nE       #2 0x55bdf90971ec <unknown>\nE       #3 0x55bdf9095055 <unknown>\nE       #4 0x55bdf90926f2 <unknown>\nE       #5 0x55bdf90918ca <unknown>\nE       #6 0x55bdf90844cd <unknown>\nE       #7 0x55bdf90b6292 <unknown>\nE       #8 0x55bdf9083e4a <unknown>\nE       #9 0x55bdf90b645e <unknown>\nE       #10 0x55bdf90dc70c <unknown>\nE       #11 0x55bdf90b6063 <unknown>\nE       #12 0x55bdf9082328 <unknown>\nE       #13 0x55bdf9083491 <unknown>\nE       #14 0x55bdf954742b <unknown>\nE       #15 0x55bdf954b2ec <unknown>\nE       #16 0x55bdf952ea22 <unknown>\nE       #17 0x55bdf954be64 <unknown>\nE       #18 0x55bdf9512bef <unknown>\nE       #19 0x55bdf956e558 <unknown>\nE       #20 0x55bdf956e736 <unknown>\nE       #21 0x55bdf957ee76 <unknown>\nE       #22 0x7fde71e9caa4 <unknown>\nE       #23 0x7fde71f29c3c <unknown>\n\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/errorhandler.py:229: ElementClickInterceptedException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <US_55-saii-d3v_ReTestsManual_test.TestManualDetectedBugs object at 0x7f7fd11a57f0>\nworker_id = 'master'\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\ncur_language = '', cur_country = 'gb', cur_role = 'NoAuth'\ncur_login = 'test001.miketar+1@gmail.com', cur_password = 'Qwer1234-!@#$'\n\n    @allure.step(\n        'Start retest manual TC_55!364 | Error 404 page is opened after click on any Trading instrument link '\n        'in the widget on the \"Spread betting\" page')\n    @pytest.mark.parametrize('cur_language', [''])\n    @pytest.mark.parametrize('cur_country', ['gb'])\n    @pytest.mark.parametrize('cur_role', ['Auth', 'NoAuth', 'NoReg'])\n    @pytest.mark.bug_364\n    def test_364(self, worker_id, d, cur_language, cur_country, cur_role, cur_login, cur_password):\n        \"\"\"\n         Check: Error 404 page is opened after click on any Trading instrument link\n         in the widget on the \"Spread betting\" page\n         Language: EN.\n         License: FCA, FCA.\n         Author: Sergey Aiidzhanov\n         \"\"\"\n        bid = build_dynamic_arg_for_us_55(\n            d, worker_id, cur_language, cur_country, cur_role,\n            \"55\", \"ReTests of Manual Detected Bugs\",\n            \"364\",\n            'Error 404 page is opened after click on any Trading instrument link '\n            'in the widget on the \"Spread betting\" page',\n            False,\n            False\n        )\n    \n        # Arrange\n>       link = apply_preconditions_to_link(d, cur_language, cur_country, cur_role, cur_login, cur_password)\n\ntests/US_55_ReTestsManual/saii-d3v/US_55-saii-d3v_ReTestsManual_test.py:1059: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/conditions_v2.py:78: in apply_preconditions_to_link\n    return cond.preconditions(d, CapitalComPageSrc.URL_NEW, '', cur_language, cur_country, cur_role,\npages/conditions_v2.py:154: in preconditions\n    self.to_do_authorisation_new(d, host, cur_login, cur_password, cur_role)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.conditions_v2.NewConditions object at 0x7f7fd1048410>\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\nlink = 'https://capital.com/en-gb', login = 'test001.miketar+1@gmail.com'\npassword = 'Qwer1234-!@#$', cur_role = 'NoAuth'\n\n    @allure.step(f\"{datetime.now()}   Start Authorization\")\n    # @profile(precision=3)\n    def to_do_authorisation_new(self, d, link, login, password, cur_role):\n        \"\"\"Authorization\"\"\"\n        print(f\"\\n\" f\"{datetime.now()}   Start Authorization\")\n    \n        # Setup wait for later\n        menu = MainMenu(d, link)\n        assert login != \"\", \"Авторизация невозможна. Не указан e-mail\"\n        assert password != \"\", \"Авторизация невозможна. Не указан пароль\"\n    \n        # нажать в хедере на кнопку \"Log in\"\n        try:\n            menu.element_is_clickable(menu.MENU_LOGIN).click()\n        except:\n>           pytest.fail(\"Bug! 'Login' button is not clicked\")\nE           Failed: Bug! 'Login' button is not clicked\n\npages/conditions_v2.py:239: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"d","time":{"start":1742685817846,"stop":1742685818640,"duration":794},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"worker_id","time":{"start":1742685818640,"stop":1742685818640,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_login","time":{"start":1742685818640,"stop":1742685818640,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cur_password","time":{"start":1742685818640,"stop":1742685818641,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n         Check: Error 404 page is opened after click on any Trading instrument link\n         in the widget on the \"Spread betting\" page\n         Language: EN.\n         License: FCA, FCA.\n         Author: Sergey Aiidzhanov\n         ","status":"failed","statusMessage":"Failed: Bug! 'Login' button is not clicked","statusTrace":"self = <pages.conditions_v2.NewConditions object at 0x7f7fd1048410>\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\nlink = 'https://capital.com/en-gb', login = 'test001.miketar+1@gmail.com'\npassword = 'Qwer1234-!@#$', cur_role = 'NoAuth'\n\n    @allure.step(f\"{datetime.now()}   Start Authorization\")\n    # @profile(precision=3)\n    def to_do_authorisation_new(self, d, link, login, password, cur_role):\n        \"\"\"Authorization\"\"\"\n        print(f\"\\n\" f\"{datetime.now()}   Start Authorization\")\n    \n        # Setup wait for later\n        menu = MainMenu(d, link)\n        assert login != \"\", \"Авторизация невозможна. Не указан e-mail\"\n        assert password != \"\", \"Авторизация невозможна. Не указан пароль\"\n    \n        # нажать в хедере на кнопку \"Log in\"\n        try:\n>           menu.element_is_clickable(menu.MENU_LOGIN).click()\n\npages/conditions_v2.py:237: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webelement.py:94: in click\n    self._execute(Command.CLICK_ELEMENT)\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webelement.py:395: in _execute\n    return self._parent.execute(command, params)\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/webdriver.py:380: in execute\n    self.error_handler.check_response(response)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <selenium.webdriver.remote.errorhandler.ErrorHandler object at 0x7f7fd120cd10>\nresponse = {'status': 400, 'value': '{\"value\":{\"error\":\"element click intercepted\",\"message\":\"element click intercepted: Element ...\\\\n#21 0x55bdf957ee76 \\\\u003Cunknown>\\\\n#22 0x7fde71e9caa4 \\\\u003Cunknown>\\\\n#23 0x7fde71f29c3c \\\\u003Cunknown>\\\\n\"}}'}\n\n    def check_response(self, response: Dict[str, Any]) -> None:\n        \"\"\"Checks that a JSON response from the WebDriver does not have an\n        error.\n    \n        :Args:\n         - response - The JSON response from the WebDriver server as a dictionary\n           object.\n    \n        :Raises: If the response contains an error message.\n        \"\"\"\n        status = response.get(\"status\", None)\n        if not status or status == ErrorCode.SUCCESS:\n            return\n        value = None\n        message = response.get(\"message\", \"\")\n        screen: str = response.get(\"screen\", \"\")\n        stacktrace = None\n        if isinstance(status, int):\n            value_json = response.get(\"value\", None)\n            if value_json and isinstance(value_json, str):\n                import json\n    \n                try:\n                    value = json.loads(value_json)\n                    if len(value) == 1:\n                        value = value[\"value\"]\n                    status = value.get(\"error\", None)\n                    if not status:\n                        status = value.get(\"status\", ErrorCode.UNKNOWN_ERROR)\n                        message = value.get(\"value\") or value.get(\"message\")\n                        if not isinstance(message, str):\n                            value = message\n                            message = message.get(\"message\")\n                    else:\n                        message = value.get(\"message\", None)\n                except ValueError:\n                    pass\n    \n        exception_class: Type[WebDriverException]\n        e = ErrorCode()\n        error_codes = [item for item in dir(e) if not item.startswith(\"__\")]\n        for error_code in error_codes:\n            error_info = getattr(ErrorCode, error_code)\n            if isinstance(error_info, list) and status in error_info:\n                exception_class = getattr(ExceptionMapping, error_code, WebDriverException)\n                break\n        else:\n            exception_class = WebDriverException\n    \n        if not value:\n            value = response[\"value\"]\n        if isinstance(value, str):\n            raise exception_class(value)\n        if message == \"\" and \"message\" in value:\n            message = value[\"message\"]\n    \n        screen = None  # type: ignore[assignment]\n        if \"screen\" in value:\n            screen = value[\"screen\"]\n    \n        stacktrace = None\n        st_value = value.get(\"stackTrace\") or value.get(\"stacktrace\")\n        if st_value:\n            if isinstance(st_value, str):\n                stacktrace = st_value.split(\"\\n\")\n            else:\n                stacktrace = []\n                try:\n                    for frame in st_value:\n                        line = frame.get(\"lineNumber\", \"\")\n                        file = frame.get(\"fileName\", \"<anonymous>\")\n                        if line:\n                            file = f\"{file}:{line}\"\n                        meth = frame.get(\"methodName\", \"<anonymous>\")\n                        if \"className\" in frame:\n                            meth = f\"{frame['className']}.{meth}\"\n                        msg = \"    at %s (%s)\"\n                        msg = msg % (meth, file)\n                        stacktrace.append(msg)\n                except TypeError:\n                    pass\n        if exception_class == UnexpectedAlertPresentException:\n            alert_text = None\n            if \"data\" in value:\n                alert_text = value[\"data\"].get(\"text\")\n            elif \"alert\" in value:\n                alert_text = value[\"alert\"].get(\"text\")\n            raise exception_class(message, screen, stacktrace, alert_text)  # type: ignore[call-arg]  # mypy is not smart enough here\n>       raise exception_class(message, screen, stacktrace)\nE       selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element <button class=\"accountBtns_btn__vOcCs accountBtns_btnEmpty__TCWRE helpers_showLg__UPEqH js-analyticsClick js-analyticsVisible\" data-type=\"btn_header_login\" data-testid=\"login_btn\">...</button> is not clickable at point (1385, 121). Other element would receive the click: <div class=\"modal_overlay__f_YlZ modal_mobileBottomAttached__cTOIu\">...</div>\nE         (Session info: chrome=134.0.6998.88)\nE       Stacktrace:\nE       #0 0x55bdf957fffa <unknown>\nE       #1 0x55bdf903e970 <unknown>\nE       #2 0x55bdf90971ec <unknown>\nE       #3 0x55bdf9095055 <unknown>\nE       #4 0x55bdf90926f2 <unknown>\nE       #5 0x55bdf90918ca <unknown>\nE       #6 0x55bdf90844cd <unknown>\nE       #7 0x55bdf90b6292 <unknown>\nE       #8 0x55bdf9083e4a <unknown>\nE       #9 0x55bdf90b645e <unknown>\nE       #10 0x55bdf90dc70c <unknown>\nE       #11 0x55bdf90b6063 <unknown>\nE       #12 0x55bdf9082328 <unknown>\nE       #13 0x55bdf9083491 <unknown>\nE       #14 0x55bdf954742b <unknown>\nE       #15 0x55bdf954b2ec <unknown>\nE       #16 0x55bdf952ea22 <unknown>\nE       #17 0x55bdf954be64 <unknown>\nE       #18 0x55bdf9512bef <unknown>\nE       #19 0x55bdf956e558 <unknown>\nE       #20 0x55bdf956e736 <unknown>\nE       #21 0x55bdf957ee76 <unknown>\nE       #22 0x7fde71e9caa4 <unknown>\nE       #23 0x7fde71f29c3c <unknown>\n\n../../../.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/selenium/webdriver/remote/errorhandler.py:229: ElementClickInterceptedException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <US_55-saii-d3v_ReTestsManual_test.TestManualDetectedBugs object at 0x7f7fd11a57f0>\nworker_id = 'master'\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\ncur_language = '', cur_country = 'gb', cur_role = 'NoAuth'\ncur_login = 'test001.miketar+1@gmail.com', cur_password = 'Qwer1234-!@#$'\n\n    @allure.step(\n        'Start retest manual TC_55!364 | Error 404 page is opened after click on any Trading instrument link '\n        'in the widget on the \"Spread betting\" page')\n    @pytest.mark.parametrize('cur_language', [''])\n    @pytest.mark.parametrize('cur_country', ['gb'])\n    @pytest.mark.parametrize('cur_role', ['Auth', 'NoAuth', 'NoReg'])\n    @pytest.mark.bug_364\n    def test_364(self, worker_id, d, cur_language, cur_country, cur_role, cur_login, cur_password):\n        \"\"\"\n         Check: Error 404 page is opened after click on any Trading instrument link\n         in the widget on the \"Spread betting\" page\n         Language: EN.\n         License: FCA, FCA.\n         Author: Sergey Aiidzhanov\n         \"\"\"\n        bid = build_dynamic_arg_for_us_55(\n            d, worker_id, cur_language, cur_country, cur_role,\n            \"55\", \"ReTests of Manual Detected Bugs\",\n            \"364\",\n            'Error 404 page is opened after click on any Trading instrument link '\n            'in the widget on the \"Spread betting\" page',\n            False,\n            False\n        )\n    \n        # Arrange\n>       link = apply_preconditions_to_link(d, cur_language, cur_country, cur_role, cur_login, cur_password)\n\ntests/US_55_ReTestsManual/saii-d3v/US_55-saii-d3v_ReTestsManual_test.py:1059: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/conditions_v2.py:78: in apply_preconditions_to_link\n    return cond.preconditions(d, CapitalComPageSrc.URL_NEW, '', cur_language, cur_country, cur_role,\npages/conditions_v2.py:154: in preconditions\n    self.to_do_authorisation_new(d, host, cur_login, cur_password, cur_role)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.conditions_v2.NewConditions object at 0x7f7fd1048410>\nd = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>\nlink = 'https://capital.com/en-gb', login = 'test001.miketar+1@gmail.com'\npassword = 'Qwer1234-!@#$', cur_role = 'NoAuth'\n\n    @allure.step(f\"{datetime.now()}   Start Authorization\")\n    # @profile(precision=3)\n    def to_do_authorisation_new(self, d, link, login, password, cur_role):\n        \"\"\"Authorization\"\"\"\n        print(f\"\\n\" f\"{datetime.now()}   Start Authorization\")\n    \n        # Setup wait for later\n        menu = MainMenu(d, link)\n        assert login != \"\", \"Авторизация невозможна. Не указан e-mail\"\n        assert password != \"\", \"Авторизация невозможна. Не указан пароль\"\n    \n        # нажать в хедере на кнопку \"Log in\"\n        try:\n            menu.element_is_clickable(menu.MENU_LOGIN).click()\n        except:\n>           pytest.fail(\"Bug! 'Login' button is not clicked\")\nE           Failed: Bug! 'Login' button is not clicked\n\npages/conditions_v2.py:239: Failed","steps":[{"name":"Start retest manual TC_55!364 | Error 404 page is opened after click on any Trading instrument link in the widget on the \"Spread betting\" page","time":{"start":1742688094123,"stop":1742688099998,"duration":5875},"status":"failed","statusMessage":"Failed: Bug! 'Login' button is not clicked\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/tests/US_55_ReTestsManual/saii-d3v/US_55-saii-d3v_ReTestsManual_test.py\", line 1059, in test_364\n    link = apply_preconditions_to_link(d, cur_language, cur_country, cur_role, cur_login, cur_password)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 78, in apply_preconditions_to_link\n    return cond.preconditions(d, CapitalComPageSrc.URL_NEW, '', cur_language, cur_country, cur_role,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 154, in preconditions\n    self.to_do_authorisation_new(d, host, cur_login, cur_password, cur_role)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 239, in to_do_authorisation_new\n    pytest.fail(\"Bug! 'Login' button is not clicked\")\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[{"name":"Build dynamic argument for TCs of US_55","time":{"start":1742688094123,"stop":1742688094125,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>"},{"name":"worker_id","value":"'master'"},{"name":"cur_language","value":"''"},{"name":"cur_country","value":"'gb'"},{"name":"cur_role","value":"'NoAuth'"},{"name":"us","value":"'55'"},{"name":"desc_us","value":"'ReTests of Manual Detected Bugs'"},{"name":"num_tc","value":"'364'"},{"name":"desc_tc","value":"'Error 404 page is opened after click on any Trading instrument link in the widget on the \"Spread betting\" page'"},{"name":"manual","value":"False"},{"name":"new_layout","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"   Set New preconditions","time":{"start":1742688094125,"stop":1742688099997,"duration":5872},"status":"failed","statusMessage":"Failed: Bug! 'Login' button is not clicked\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 154, in preconditions\n    self.to_do_authorisation_new(d, host, cur_login, cur_password, cur_role)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 239, in to_do_authorisation_new\n    pytest.fail(\"Bug! 'Login' button is not clicked\")\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[{"name":"2025-03-22 23:23:37.772176   Start Authorization","time":{"start":1742688098900,"stop":1742688099997,"duration":1097},"status":"failed","statusMessage":"Failed: Bug! 'Login' button is not clicked\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/TestCapitalComPySe/TestCapitalComPySe/pages/conditions_v2.py\", line 239, in to_do_authorisation_new\n    pytest.fail(\"Bug! 'Login' button is not clicked\")\n  File \"/home/runner/.cache/pypoetry/virtualenvs/testcapitalcompyse-CcJ6hTD8-py3.12/lib/python3.12/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>"},{"name":"link","value":"'https://capital.com/en-gb'"},{"name":"login","value":"'test001.miketar+1@gmail.com'"},{"name":"password","value":"'Qwer1234-!@#$'"},{"name":"cur_role","value":"'NoAuth'"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>"},{"name":"host","value":"'https://capital.com/en-gb'"},{"name":"end_point","value":"''"},{"name":"cur_language","value":"''"},{"name":"cur_country","value":"'gb'"},{"name":"cur_role","value":"'NoAuth'"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"worker_id","value":"'master'"},{"name":"d","value":"<selenium.webdriver.chrome.webdriver.WebDriver (session=\"e4f8b1e78cc2692d507a81f4871b4498\")>"},{"name":"cur_language","value":"''"},{"name":"cur_country","value":"'gb'"},{"name":"cur_role","value":"'NoAuth'"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"3bb95d6726418310","name":"Screenshot","source":"3bb95d6726418310.png","type":"image/png","size":611094},{"uid":"b1f098852e84fb09","name":"stdout","source":"b1f098852e84fb09.txt","type":"text/plain","size":1962}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"d::0","time":{"start":1742688683586,"stop":1742688684009,"duration":423},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"TC_55!364 | Error 404 page is opened after click on any Trading instrument link in the widget on the \"Spread betting\" page"},{"name":"feature","value":"Role: NoAuth"},{"name":"story","value":"Country: gb"},{"name":"tag","value":"bug_364"},{"name":"tag","value":"us_55"},{"name":"parentSuite","value":"tests.US_55_ReTestsManual.saii-d3v"},{"name":"suite","value":"US_55-saii-d3v_ReTestsManual_test"},{"name":"subSuite","value":"TestManualDetectedBugs"},{"name":"host","value":"fv-az1335-371"},{"name":"thread","value":"20598-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.US_55_ReTestsManual.saii-d3v.US_55-saii-d3v_ReTestsManual_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"cur_country","value":"'gb'"},{"name":"cur_language","value":"''"},{"name":"cur_login","value":"'test001.miketar+1@gmail.com'"},{"name":"cur_password","value":"'Qwer1234-!@#$'"},{"name":"cur_role","value":"'NoAuth'"},{"name":"d","value":"'Chrome'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":9,"broken":6,"skipped":0,"passed":0,"unknown":0,"total":15},"items":[{"uid":"19a0765fe7199250","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/355//#testresult/19a0765fe7199250","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742601661733,"stop":1742601667613,"duration":5880}},{"uid":"42c5b518213d85b8","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/354//#testresult/42c5b518213d85b8","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742514221808,"stop":1742514227653,"duration":5845}},{"uid":"11537d4bc86051d3","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/353//#testresult/11537d4bc86051d3","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742427908908,"stop":1742427914968,"duration":6060}},{"uid":"b2444f7097842437","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/352//#testresult/b2444f7097842437","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742340995642,"stop":1742341001665,"duration":6023}},{"uid":"8bf218cbd4eecfb0","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/351//#testresult/8bf218cbd4eecfb0","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742256091356,"stop":1742256097369,"duration":6013}},{"uid":"14d5275d0f13fd1c","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/350//#testresult/14d5275d0f13fd1c","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742169599107,"stop":1742169604909,"duration":5802}},{"uid":"3078e77915004301","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/349//#testresult/3078e77915004301","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1742083396405,"stop":1742083402217,"duration":5812}},{"uid":"d2ffed75c881b1d3","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/348//#testresult/d2ffed75c881b1d3","status":"failed","statusDetails":"Failed: Bug! 'Login' button is not clicked","time":{"start":1741995961994,"stop":1741995967954,"duration":5960}},{"uid":"ff4b31111a3c777c","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/347//#testresult/ff4b31111a3c777c","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x55b0a13b9a1a <unknown>\n#1 0x55b0a0e71390 <unknown>\n#2 0x55b0a0ec2c85 <unknown>\n#3 0x55b0a0ec2eb1 <unknown>\n#4 0x55b0a0f11d64 <unknown>\n#5 0x55b0a0ee8bfd <unknown>\n#6 0x55b0a0f0f07b <unknown>\n#7 0x55b0a0ee89a3 <unknown>\n#8 0x55b0a0eb460e <unknown>\n#9 0x55b0a0eb5dd1 <unknown>\n#10 0x55b0a137fddb <unknown>\n#11 0x55b0a1383cbc <unknown>\n#12 0x55b0a1367392 <unknown>\n#13 0x55b0a1384834 <unknown>\n#14 0x55b0a134b1ef <unknown>\n#15 0x55b0a13a8038 <unknown>\n#16 0x55b0a13a8216 <unknown>\n#17 0x55b0a13b8896 <unknown>\n#18 0x7fc6d749caa4 <unknown>\n#19 0x7fc6d7529c3c <unknown>","time":{"start":1741912610478,"stop":1741912637306,"duration":26828}},{"uid":"1284d73874358c93","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/346//#testresult/1284d73874358c93","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x55f42bb97a1a <unknown>\n#1 0x55f42b64f390 <unknown>\n#2 0x55f42b6a0c85 <unknown>\n#3 0x55f42b6a0eb1 <unknown>\n#4 0x55f42b6efd64 <unknown>\n#5 0x55f42b6c6bfd <unknown>\n#6 0x55f42b6ed07b <unknown>\n#7 0x55f42b6c69a3 <unknown>\n#8 0x55f42b69260e <unknown>\n#9 0x55f42b693dd1 <unknown>\n#10 0x55f42bb5dddb <unknown>\n#11 0x55f42bb61cbc <unknown>\n#12 0x55f42bb45392 <unknown>\n#13 0x55f42bb62834 <unknown>\n#14 0x55f42bb291ef <unknown>\n#15 0x55f42bb86038 <unknown>\n#16 0x55f42bb86216 <unknown>\n#17 0x55f42bb96896 <unknown>\n#18 0x7f5e2b49caa4 <unknown>\n#19 0x7f5e2b529c3c <unknown>","time":{"start":1741825481983,"stop":1741825509773,"duration":27790}},{"uid":"eb3e86e7211ac211","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/345//#testresult/eb3e86e7211ac211","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x55b8c973214a <unknown>\n#1 0x55b8c91cfb80 <unknown>\n#2 0x55b8c92210e9 <unknown>\n#3 0x55b8c9221271 <unknown>\n#4 0x55b8c926fde4 <unknown>\n#5 0x55b8c9246efd <unknown>\n#6 0x55b8c926d14a <unknown>\n#7 0x55b8c9246ca3 <unknown>\n#8 0x55b8c9212f08 <unknown>\n#9 0x55b8c9214071 <unknown>\n#10 0x55b8c96fbb5b <unknown>\n#11 0x55b8c96ffae2 <unknown>\n#12 0x55b8c96e7967 <unknown>\n#13 0x55b8c97006d4 <unknown>\n#14 0x55b8c96cbc7f <unknown>\n#15 0x55b8c9720cd8 <unknown>\n#16 0x55b8c9720ea9 <unknown>\n#17 0x55b8c9730fc6 <unknown>\n#18 0x7f346149caa4 <unknown>\n#19 0x7f3461529c3c <unknown>","time":{"start":1741745277505,"stop":1741745305787,"duration":28282}},{"uid":"6392fc8b9a90b418","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/344//#testresult/6392fc8b9a90b418","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x5586b95fe14a <unknown>\n#1 0x5586b909bb80 <unknown>\n#2 0x5586b90ed0e9 <unknown>\n#3 0x5586b90ed271 <unknown>\n#4 0x5586b913bde4 <unknown>\n#5 0x5586b9112efd <unknown>\n#6 0x5586b913914a <unknown>\n#7 0x5586b9112ca3 <unknown>\n#8 0x5586b90def08 <unknown>\n#9 0x5586b90e0071 <unknown>\n#10 0x5586b95c7b5b <unknown>\n#11 0x5586b95cbae2 <unknown>\n#12 0x5586b95b3967 <unknown>\n#13 0x5586b95cc6d4 <unknown>\n#14 0x5586b9597c7f <unknown>\n#15 0x5586b95eccd8 <unknown>\n#16 0x5586b95ecea9 <unknown>\n#17 0x5586b95fcfc6 <unknown>\n#18 0x7fda4749caa4 <unknown>\n#19 0x7fda47529c3c <unknown>","time":{"start":1741659507382,"stop":1741659535623,"duration":28241}},{"uid":"40e69da05e538432","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/343//#testresult/40e69da05e538432","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x56503cff714a <unknown>\n#1 0x56503ca94b80 <unknown>\n#2 0x56503cae60e9 <unknown>\n#3 0x56503cae6271 <unknown>\n#4 0x56503cb34de4 <unknown>\n#5 0x56503cb0befd <unknown>\n#6 0x56503cb3214a <unknown>\n#7 0x56503cb0bca3 <unknown>\n#8 0x56503cad7f08 <unknown>\n#9 0x56503cad9071 <unknown>\n#10 0x56503cfc0b5b <unknown>\n#11 0x56503cfc4ae2 <unknown>\n#12 0x56503cfac967 <unknown>\n#13 0x56503cfc56d4 <unknown>\n#14 0x56503cf90c7f <unknown>\n#15 0x56503cfe5cd8 <unknown>\n#16 0x56503cfe5ea9 <unknown>\n#17 0x56503cff5fc6 <unknown>\n#18 0x7fb27be9caa4 <unknown>\n#19 0x7fb27bf29c3c <unknown>","time":{"start":1741566731224,"stop":1741566758959,"duration":27735}},{"uid":"e916f6381d655f63","reportUrl":"https://AlexTomAQA.github.io/TestCapitalComPySe/342//#testresult/e916f6381d655f63","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n#0 0x55be0814c14a <unknown>\n#1 0x55be07be9b80 <unknown>\n#2 0x55be07c3b0e9 <unknown>\n#3 0x55be07c3b271 <unknown>\n#4 0x55be07c89de4 <unknown>\n#5 0x55be07c60efd <unknown>\n#6 0x55be07c8714a <unknown>\n#7 0x55be07c60ca3 <unknown>\n#8 0x55be07c2cf08 <unknown>\n#9 0x55be07c2e071 <unknown>\n#10 0x55be08115b5b <unknown>\n#11 0x55be08119ae2 <unknown>\n#12 0x55be08101967 <unknown>\n#13 0x55be0811a6d4 <unknown>\n#14 0x55be080e5c7f <unknown>\n#15 0x55be0813acd8 <unknown>\n#16 0x55be0813aea9 <unknown>\n#17 0x55be0814afc6 <unknown>\n#18 0x7fe75e29caa4 <unknown>\n#19 0x7fe75e329c3c <unknown>","time":{"start":1741479499834,"stop":1741479526775,"duration":26941}}]},"tags":["bug_364","us_55"]},"source":"1a5a7aaf71a9b8e8.json","parameterValues":["'gb'","''","'test001.miketar+1@gmail.com'","'Qwer1234-!@#$'","'NoAuth'","'Chrome'"]}